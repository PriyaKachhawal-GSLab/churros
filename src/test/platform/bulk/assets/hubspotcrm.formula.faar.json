{
    "accountId": 2547,
    "active": true,
    "api": "POST /churros-bulkloader-faar",
    "configuration": [],
    "createdDate": "2018-01-15T12:50:44Z",
    "debugLoggingEnabled": true,
    "id": 45300,
    "method": "POST",
    "name": "churros-bulkloader-faar",
    "singleThreaded": false,
    "steps": [
        {
            "id": 100837,
            "name": "bulkUploadEven",
            "onFailure": [],
            "onSuccess": [
                "response"
            ],
            "properties": {
                "api": "${trigger.args.workflow.targetConfiguration.path}",
                "body": "${steps.constructPayloads.bodyEven}",
                "elementInstanceId": "${trigger.args.targetInstanceId}",
                "method": "POST"
            },
            "type": "elementRequest"
        },
        {
            "id": 100838,
            "name": "bulkUploadOdd",
            "onFailure": [],
            "onSuccess": [
                "bulkUploadEven"
            ],
            "properties": {
                "api": "${trigger.args.workflow.targetConfiguration.path}",
                "body": "${steps.constructPayloads.bodyOdd}",
                "elementInstanceId": "${trigger.args.targetInstanceId}",
                "method": "POST"
            },
            "type": "elementRequest"
        },
        {
            "id": 100836,
            "name": "constructPayloads",
            "onFailure": [],
            "onSuccess": [
                "bulkUploadOdd"
            ],
            "properties": {
                "body": "var bodyOdd = {\n    type: 'workflow-multipart',\n    parts: [\n      {\n        name: 'file',\n        filename: 'file',\n        'Content-Type': 'text/plain',\n        content: trigger.args.data.filter((row, index) => index%2 === 1).join('\\n')\n      }\n    ]\n};\n\nvar bodyEven = {\n    type: 'workflow-multipart',\n    parts: [\n      {\n        name: 'file',\n        filename: 'file',\n        'Content-Type': 'text/plain',\n        content: trigger.args.data.filter((row, index) => index%2 === 0).join('\\n')\n      }\n    ]\n};\n\ndone({\n  bodyOdd: bodyOdd,\n  bodyEven: bodyEven\n});\n"
            },
            "type": "script"
        },
        {
            "id": 100835,
            "name": "printItOut",
            "onFailure": [],
            "onSuccess": [
                "constructPayloads"
            ],
            "properties": {
                "body": "done({trigger});"
            },
            "type": "script"
        },
        {
            "id": 100839,
            "name": "response",
            "onFailure": [],
            "onSuccess": [],
            "properties": {
                "body": "done({\n  jobs:[\n    {\n      jobId:steps.bulkUploadOdd.response.body.id,\n      category: 'odd'\n      \n    },\n    {\n      jobId:steps.bulkUploadEven.response.body.id,\n      category: 'even'\n    }]\n});"
            },
            "type": "script"
        }
    ],
    "triggers": [
        {
            "async": true,
            "id": 38719,
            "name": "trigger",
            "onFailure": [],
            "onSuccess": [
                "printItOut"
            ],
            "properties": {},
            "type": "manual"
        }
    ],
    "uri": "/churros-bulkloader-faar",
    "userId": 2908
}
