{
    "name": "bulk-transfer",
    "steps": [
        {
            "onSuccess": [
                "bulkTransfer"
            ],
            "name": "build",
            "type": "script",
            "properties": {
                "body": "done({\n  sourceHeaders: {\n    ElementsTestHeader: 'source'\n  },\n  sourceQuery: {\n    ElemetsTestQuery: 'source'\n  },\n  targetHeaders: {\n    'Elements-Async-Callback-Url': 'webhooks.joshuawyse.com'\n  },\n  targetMetadata: {\n    testMetadata: 'true'\n  }\n});"
            }
        },
        {
            "name": "bulkTransfer",
            "type": "bulkTransfer",
            "properties": {
                "sourceBulkQuery": "${steps.build.sourceQuery}",
                "targetBulkHeaders": "${steps.build.targetHeaders}",
                "targetBulkMetadata": "${steps.build.targetMetadata}",
                "sourceElementInstanceId": "${config.source}",
                "targetElementInstanceId": "${config.target}",
                "sourceBulkApi": "/hubs/crm/bulk/${trigger.args.id}/${config.object.name}",
                "sourceBulkHeaders": "${steps.build.sourceHeaders}",
                "targetBulkApi": "/hubs/crm/bulk/${config.object.name}"
            }
        }
    ],
    "triggers": [
        {
            "onSuccess": [
                "build"
            ],
            "type": "manual",
            "name": "trigger"
        }
    ],
    "configuration": [
        {
            "key": "source",
            "name": "source",
            "type": "elementInstance"
        },
        {
            "key": "target",
            "name": "target",
            "type": "elementInstance"
        },
        {
            "key": "object.name",
            "name": "object.name",
            "type": "value"
        }
    ]
}
