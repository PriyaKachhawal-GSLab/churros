{
    "name": "loop-successful",
    "steps": [
        {
            "onSuccess": [
                "loop"
            ],
            "onFailure": [],
            "name": "create-list",
            "type": "script",
            "properties": {
                "body": "  var arr = [];  for (var i = 0; i < 50; i++) {    arr.push({ 'val': Math.random() });  }  var list = { 'list': arr };  return list;"
            }
        },
        {
            "onSuccess": [
                "create-email-body"
            ],
            "onFailure": [],
            "name": "loop",
            "type": "loop",
            "properties": {
                "retry": "false",
                "list": "${create-list.list}"
            }
        },
        {
            "onSuccess": [
                "loop"
            ],
            "onFailure": [],
            "name": "create-email-body",
            "type": "script",
            "properties": {
                "body": "var loopy = steps.loop.entry.val\n\nvar message = {\n  \"subject\": \"Formula Email\",\n  \"to\": \"devnull@cloud-elements.com\",\n  \"from\": \"devnull@cloud-elements.com\",\n  \"message\": \"Loopy val: \" + loopy\n};\nreturn message;"
            }
        }
    ],
    "triggers": [
        {
            "type": "event",
            "async": true,
            "onSuccess": ["create-list"],
            "onFailure": [],
            "properties": {
                "elementInstanceId": "${trigger-instance}"
            }
        }
    ],
    "singleThreaded": false,
    "active": true,
    "configuration": [
        {
            "key": "notification.email",
            "name": "Notification Email",
            "type": "value",
            "description": "Optional email where formula errors and notification steps will be sent (If more than one email is needed, separate each email with a comma)",
            "required": false
        },
        {
            "key": "trigger-instance",
            "name": "trigger-instance",
            "type": "elementInstance",
            "required": true
        }
    ]
}
