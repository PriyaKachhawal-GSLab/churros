<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="core_cleaner_module_elements.html">elements</a></li><li><a href="core_cleaner_module_formulas.html">formulas</a></li><li><a href="module-core_cleaner.html">core/cleaner</a></li><li><a href="module-core_cloud.html">core/cloud</a><ul class='methods'><li data-type='method'><a href="module-core_cloud.html#~post">post</a></li></ul></li><li><a href="module-core_oauth.html">core/oauth</a></li><li><a href="module-core_suite.html">core/suite</a><ul class='methods'><li data-type='method'><a href="module-core_suite.html#.forElement">forElement</a></li><li data-type='method'><a href="module-core_suite.html#.forPlatform">forPlatform</a></li><li data-type='method'><a href="module-core_suite.html#~itNextPagePagination">itNextPagePagination</a></li></ul></li><li><a href="module-core_tools.html">core/tools</a><ul class='members'><li data-type='member'><a href="module-core_tools.html#.wait">wait</a></li></ul><ul class='methods'><li data-type='method'><a href="module-core_tools.html#.base64Decode">base64Decode</a></li><li data-type='method'><a href="module-core_tools.html#.base64Encode">base64Encode</a></li><li data-type='method'><a href="module-core_tools.html#.logAndThrow">logAndThrow</a></li><li data-type='method'><a href="module-core_tools.html#.random">random</a></li><li data-type='method'><a href="module-core_tools.html#.randomEmail">randomEmail</a></li><li data-type='method'><a href="module-core_tools.html#.randomInt">randomInt</a></li><li data-type='method'><a href="module-core_tools.html#.sleep">sleep</a></li><li data-type='method'><a href="module-core_tools.html#.stringify">stringify</a></li></ul></li><li><a href="module-provisioner.html">provisioner</a><ul class='methods'><li data-type='method'><a href="module-provisioner.html#~orchestrateCreate">orchestrateCreate</a></li></ul></li><li><a href="module-tunnel.html">tunnel</a><ul class='methods'><li data-type='method'><a href="module-tunnel.html#.start">start</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#handlerCb">handlerCb</a></li><li><a href="global.html#listen">listen</a></li><li><a href="global.html#server">server</a></li><li><a href="global.html#start">start</a></li><li><a href="global.html#stop">stop</a></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>churros <sub><sup>| Cloud Elements API Testing Framework </sup></sub></h1><hr>
<p><a href="#"><img src="http://img.shields.io/badge/version-v0.5.0-blue.svg" alt="version"></a> <a href="http://semver.org/"><img src="http://img.shields.io/badge/versioning-semver-blue.svg" alt="versioning"></a> <a href="https://guides.github.com/introduction/flow/"><img src="http://img.shields.io/badge/branching-github%20flow-blue.svg" alt="branching"></a>
<a href="https://circleci.com/gh/cloud-elements/churros"><img src="https://circleci.com/gh/cloud-elements/churros.svg?style=shield" alt="Circle CI"></a>
<a href="https://coveralls.io/github/cloud-elements/churros?branch=master"><img src="https://coveralls.io/repos/github/cloud-elements/churros/badge.svg?branch=master" alt="Coverage Status"></a></p>
<h2>Overview</h2><p>Integration testing framework for CE APIs, written in Javascript.  Provides testing for all things Cloud Elements, from platform resources (<code>elements</code>, <code>notifications</code>, etc.) to all of the current elements in our catalog (<code>sfdc</code>, <code>dropbox</code>, etc.).  This framework has up-to-date example JSON requests, example JSON transformations and much more.  These tests are run against our platform many times a day, guaranteeing that they represent what our platform supports <em>today</em>.</p>
<h2>How</h2><p>Interact with the <code>churros</code> CLI to go about initializing <code>churros</code>, stubbing out tests and running tests.  When it comes to running tests, the <code>churros test</code> sub-command simply wraps the <code>mocha</code> executable, which is the framework that all of our tests run as.  The lower-level functions are all using the <code>chakram</code> node library to make HTTP requests, and then valiation of payloads and HTTP responses is done using <code>chai</code> assertions.  The <code>churros</code> framework relies heavily on Javascript promises in order to manage the asynchronous nature of <code>nodejs</code>.  If you're new to Javascript, I recommend familiarizing yourself with promises before trying to write any of your own tests.</p>
<h2>Installation</h2><p>If you don't have <code>node</code> and <code>npm</code> installed, do <a href="https://docs.npmjs.com/getting-started/installing-node">that</a> first.</p>
<blockquote>
<p><strong>PROTIP:</strong> <code>node</code> version must  be &gt;= <code>v4.0.0</code></p>
</blockquote>
<p>Install the node dependencies and initialize churros.</p>
<pre class="prettyprint source lang-bash"><code># Install all necessary npm packages:
$ npm install

# Need phantomjs to be installed globally or somehow available on your $PATH:
$ npm install --global phantomjs-prebuilt

# Puts churros CLI on your $PATH:
$ npm link

# Initialize your churros properties file:
$ churros init</code></pre><blockquote>
<p><strong>PROTIP:</strong> May have to <code>sudo</code> the global install and <code>npm link</code> depending on your environment</p>
<p><strong>PROTIP:</strong> You can pass a <code>--file</code> to <code>churros init</code> if you have an existing properties file that you want to initialize from (i.e. <code>churros init --file /absolute/path/to/existing/properties/file</code>)</p>
<p><strong>PROTIP:</strong> <code>node</code> version <code>5.4.0</code> is prone to showing messages like the one below.  Just ignore them...</p>
<pre class="prettyprint source lang-bash"><code>npm WARN ENOENT ENOENT: no such file or directory, open '/blah/blah/blah/churros/src/core/package.json'</code></pre></blockquote>
<p>Lastly, if you don't have a personal ngrok account, you'll need to signup for a free account <a href="https://dashboard.ngrok.com/user/signup">here</a>.  After you have signed up, you should have a personal ngrok auth token that you'll need to setup on your computer per their instructions.</p>
<h2><code>churros</code> CLI</h2><p>It is worth taking some time to familiarize yourself with the <code>churros</code> CLI.  This CLI can run tests, help setup new test suites, and add/view properties that are needed in order to run certain suites.  Run <code>churros help</code> and dig through some of the different sub-commands that are currently available.  To see some examples of the most common command, <code>churros test</code>, continue on below.</p>
<h2>API Docs</h2><p>For full API docs, see the API docs <a href="http://cloud-elements.github.io/churros">here</a>.</p>
<h2>Examples</h2><h4>Element Tests</h4><p>To run the tests for any element, you must have the necessary properties setup for that element.  <em>ALL</em> properties for the elements below must be populated.  To see what properties are required, you can call <code>churros props {element}</code>.  You can also run <code>churros help props</code> for more info.</p>
<pre class="prettyprint source lang-bash"><code># Run the entire suite for the closeio element
$ churros test elements/closeio

# Run just the tests for the closeio contacts resource
$ churros test elements/closeio --test 'contacts'

# Run the entire suite for the sfdc element
$ churros test elements/sfdc

# Run the entire suite for the sfdc element and during provisioning use the phantomjs browser
$ churros test elements/sfdc --browser phantomjs</code></pre><blockquote>
<p><strong>PROTIP:</strong> The <code>--test</code> value will search all tests <code>describe(...)</code> and <code>it(...)</code> strings to determine which test(s) to run</p>
<p><strong>PROTIP:</strong> The <code>--browser</code> value defaults to <code>firefox</code>, however if you want to use a headless browser, you can pass <code>--browser phantomjs</code> as seen above</p>
</blockquote>
<h4>Platform Tests</h4><h4>Formulas</h4><pre class="prettyprint source lang-bash"><code># Run the entire formulas suite:
$ churros test platform/formulas

# Run all tests that contain 'should not allow':
$ churros test platform/formulas --test 'should not allow'

# Run all test that contain 'should allow' as a different user than is setup in your properties file:
$ churros test platform/formulas --test 'should allow' --user frank --password ricard</code></pre><blockquote>
<p><strong>PROTIP:</strong> Passing a <code>--user</code>, <code>--password</code> and/or <code>--url</code> to <code>churros test [suite]</code> overrides the default value that was setup during <code>churros init</code>.</p>
</blockquote>
<h4>Notifications</h4><pre class="prettyprint source lang-bash"><code># Run the entire notifications suite:
$ churros test platform/notifications

# Run the entire notifications suite with verbose logging on:
$ churros test platform/notifications --verbose</code></pre><blockquote>
<p><strong>PROTIP:</strong> Passing a <code>--verbose</code> to <code>churros test [suite]</code> will log all of the debug messages to the console while the tests are running.</p>
</blockquote>
<h4>Events</h4><p>These tests create an instance of an element with event notifications enabled and the event notification callback URL as a locally exposed URL.  <code>churros</code> then simulates <code>x</code> number of events into our platform and ensures that our local callback receives <code>x</code> number of callbacks.</p>
<pre class="prettyprint source lang-bash"><code># Run the event tests, using the defaults in `churros props events`:
$ churros test platform/events

# Run the event tests, using sfdc as the element to simulate events:
$ churros test platform/events --element sfdc

# Run the event tests, using sfdc as the element to simulate events, sending in 25 events and waiting 60 seconds to receive them in churros:
$ churros test platform/events --element sfdc --load 25 --wait 60 --verbose</code></pre><blockquote>
<p><strong>PROTIP:</strong> Passing a <code>--wait</code>, <code>--load</code> and/or <code>--element</code> to <code>churros test platform/events</code> overrides any default value that may be in your property file.</p>
<p><strong>PROTIP:</strong> If you want to change the default port that is exposed to receive events, then change the <code>events:port</code> property by calling <code>churros props events:port &lt;my_port&gt;</code></p>
<p><strong>PROTIP:</strong> Some elements are not currently supported as they need to have an <code>events/assets/{element}.event.json</code> file setup so <code>churros</code> knows how to simulate events from that system.  If you run the event tests with an element that is not supported you will see an error message like:</p>
<pre class="prettyprint source lang-bash"><code>$ churros test platform/events --element box
$ No box.event.json file found in the events/assets directory.  Please create this file before this element can be tested with events</code></pre></blockquote>
<h2>Known Limitations</h2><ul>
<li>Currently, <code>churros</code> tests can <em>not</em> be run if you have authenticated into CE using SSO (GitHub, Google, etc.).</li>
</ul>
<h2>Changelog</h2><p>See <a href="CHANGELOG.md">CHANGELOG.md</a></p>
<h2>Contributing</h2><p>See <a href=".github/CONTRIBUTING.md">CONTRIBUTING.md</a></p>
<h2>License</h2><p>See <a href="LICENSE.md">LICENSE.md</a></p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Aug 08 2016 15:10:21 GMT-0600 (MDT) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>